<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Dial M for Maintainability</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/night.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">

		<style>
			.flex {
				display: flex !important;
			}

			.two-columns {
				display: flex !important;
				gap: 12px;
			}

			.two-columns > div {
				flex: 1;
			}

			.absolute {
				position: absolute;
			}

			.highlight-red-border {
				border: 8px solid #ff2c2d;
				box-shadow: #ff2c2d 0px 20px 30px -10px;
			}

			.cron::before {
				content: "0 0 * * *";
				position: absolute;
    			left: 0;
    			right: 0;
    			font-size: 24px;
    			top: -45px;
    			color: #ff2c2d;
			}

			.red {
				color: #ff2c2d;
			}

			.bucket-list {
				list-style-type: none;
				padding: 0;
			}

			.bucket-list li {
				display: flex;
				align-items: center;
				margin-bottom: 8px;
			}

			.bucket-list li input[type="checkbox"] {
            	margin-right: 8px; /* Пространство между чекбоксом и текстом */
            	width: 20px; /* Увеличиваем ширину чекбокса */
            	height: 20px; /* Увеличиваем высоту чекбокса */
            	-webkit-appearance: none; /* Убираем стандартный стиль чекбокса */
            	-moz-appearance: none; /* Убираем стандартный стиль чекбокса */
            	appearance: none; /* Убираем стандартный стиль чекбокса */
            	border: 2px solid #ff2c2d; /* Граница чекбокса */
            	border-radius: 3px; /* Закругленные углы */
            	cursor: pointer;
        	}

        	.bucket-list li input[type="checkbox"]:checked {
            	background-color: #ff2c2d; /* Цвет закрашивания чекбокса */
        	}

        	.bucket-list li input[type="checkbox"]:checked::before {
            	content: '✔'; /* Галочка внутри чекбокса */
            	display: block;
            	color: white;
            	text-align: center;
            	line-height: 20px;
        	}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section id="title">
					<h2>Dial <b style="color:#ff2c2d">M</b> for Maintainability</h2>
					<p>Part II</p>
				</section>
				<section>
					<section data-transition="none" data-auto-animate id="self-introduction">
						<h2>Let's get acquainted!</h2>
					</section>
					<section data-transition="none" data-auto-animate id="self-introduction-info">
						<h2>Let's get acquainted!</h2>
						<div style="display: flex; gap: calc(var(--r-block-margin) * 2); align-items: center;">
							<img src="./assets/azat_meetup.jpeg" alt="" height="300px">
							<table style="font-size: 30px;">
								<tbody>
									<tr>
										<td style="color: var(--r-link-color);">First Name:</td>
										<td>Azat</td>
									</tr>
									<tr>
										<td style="color: var(--r-link-color);">Last Name:</td>
										<td>Davliatshin</td>
									</tr>
									<tr>
										<td style="color: var(--r-link-color);">Experience:</td>
										<td>9 years in JS development</br>Life Science & Healthcare</td>
									</tr>
									<tr>
										<td style="color: var(--r-link-color);">Expertise:</td>
										<td>FE, BE, Clouds, Mobile, Legacy</td>
									</tr>
									<tr>
										<td style="color: var(--r-link-color);">Criminal Records:</td>
										<td>Had to force push changes into production branch</td>
									</tr>
								</tbody>
							</table>
						</div>
					</section>
				</section>
				<section>
					<section data-transition="none" data-auto-animate data-auto-animate-id="two" id="agenda">
						<h2>Agenda</h2>
					</section>
					<section data-transition="none" data-auto-animate data-auto-animate-id="two" id="agenda-info">
						<h2>Agenda</h2>
						<ul>
							<li class="fragment fade-in">Follow up</li>
							<li class="fragment fade-in">Refactoring goals</li>
							<li class="fragment fade-in">Design, Refactoring, Analysis...</li>
							<li class="fragment fade-in">Conclusion</li>
							<li class="fragment fade-in">P.S.</li>
						</ul>
					</section>
					<section>
						<img src="./assets/qrcode_rickroll.png" alt="">
					</section>
				</section>
				<section id="follow-up">
					<section>
						<h2>Follow Up</h2>
					</section>
					<section id="follow-up-task-def-overview">
						<img src="./assets/task_def_2_1.svg" width="85%"/>
					</section>
					<section id="follow-up-task-def-marketing">
						<img src="./assets/task_def_2_2.svg" width="85%"/>
					</section>
					<section id="follow-up-task-def-data-analytics">
						<img src="./assets/task_def_2_3.svg" width="85%"/>
						<aside class="notes">
							С другой стороны есть команда дата аналитиков, который используют собранные маркетологами данные для формирования тех или иных тенденций и отчетов.
						</aside>
					</section>
					<section id="follow-up-task-def-solution">
						<img src="./assets/task_def_2_4.svg" width="85%"/>
					</section>
					<section id="follow-up-solution-overview">
						<img src="./assets/Solution Context Diagram (1).svg" style="transform: scale(1.3);"/>
					</section>
					<section id="follow-up-solution-cron">
						<img src="./assets/Solution Context Diagram (1).svg" style="transform: scale(1.3);"/>
						<div class="absolute highlight-red-border cron" style="top: 328px; bottom: 53px; left: -65px; right: 897px"></div>
					</section>
					<section id="follow-up-solution-lambda">
						<img src="./assets/Solution Context Diagram (1).svg" style="transform: scale(1.3);"/>
						<div class="absolute highlight-red-border" style="top: 328px; bottom: 53px; left: 142px; right: 686px"></div>
					</section>
					<section id="follow-up-follow-up-solution-storage">
						<img src="./assets/Solution Context Diagram (1).svg" style="transform: scale(1.3);"/>
						<div class="absolute highlight-red-border" style="top: 328px; bottom: 53px; left: 350px; right: 481px"></div>
					</section>
					<section style="transform: scale(1.3);" id="straightforward-solution-analysis">
						<pre style="width: 100%; margin: 0;">
<code data-line-numbers="|4-8|10-11|13|15-17"  style="width: 100%;">import { json2csv } from 'json-2-csv';
import { PutObjectCommand, S3Client } from "@aws-sdk/client-s3";

const urlAPI = "...";
const tokenAPI = "...";
const options = {
	headers: '' // use tokenAPI
};

const fetchResponse = await fetch(urlAPI, options);
const data = fetchResponse.json();

const csv = await converter.json2csv(data);

const client = new S3Client({});
const command = new PutObjectCommand({});
await client.send(command);
							</code></pre>
					</section>
					<section id="follow-up-decision">
						<h3>Solution is not maintainable</h3>
					</section>
					<section id="follow-up-term-definition">
						<h3>Maintainability</h3>
						<blockquote>QA deals with <span class="red">change</span> and the <span class="red">cost</span> in time or money <span class="red">of making a change</span>,
							including the extent to which this modification <span class="red">affects</span> other functions or quality
							attributes.</blockquote>
					</section>
					<section data-auto-animate data-auto-animate-id="tactics" id="follow-up-tactics-overview">
						<h3>Maintainability Tactics</h3>
						<img src="./assets/tactics.png"/>
						<a style="font-size: 30px; display: block;" href="https://www.amazon.com/Software-Architecture-Practice-SEI-Engineering/dp/0136886094" target="_blank">
							Software Architecture in Practice (SEI Series in Software Engineering)
						</a>
						<aside class="notes">
							Что касается поддерживаемости, то все тактики направлены ради одной цели: сделать код как можно проще, динамичнее и гибким 
							за счет определенных решений и действий.
						</aside>
					</section>
					<section class="two-columns" id="follow-up-design-list">
						<div>
							<h3>Design Principles</h3>
							<ul>
								<li>GRASP</li>
								<li>SOLID</li>
								<li>IoC</li>
							</ul>
						</div>
						<div>
							<h3>Patterns, Techniques</h3>
							<ul>
								<li>DI</li>
								<li>Low Coupling</li>
								<li>High Cohesion</li>
							</ul>
						</div>
						<img src="./assets/solid.png" style="position: fixed; left: 350px; top: 370px;" height="100px" alt="">
						<img src="./assets/qrcode_wiki_grasp.png" style="position: fixed; left: 25px; top: 370px;" height="100px" alt="">
					</section>
					<section id="follow-up-complete" style="height: 100%;">
						<div style="height: 100%; display: flex; align-items: center; justify-content: center;">
							<img width="100%" src="./assets/okay-lets-go.gif"/>
						</div>
					</section>
				</section>
				<section id="refactoring-goals">
					<section data-auto-animate data-auto-animate-id="refactoring-goals">
						<h2>Refactoring goals</h2>
					</section>
					<section data-auto-animate data-auto-animate-id="refactoring-goals">
						<h2>Refactoring goals</h2>
						<ul>
							<li class="fragment fade-in">Modular structure</li>
							<ul class="fragment fade-in">
								<li class="fragment fade-in">GRASP, SOLID</li>
								<li class="fragment fade-in">Easy to test (as less as dep-s as possible)</li>
								<li class="fragment fade-in">Easy to extend/replace/reuse</li>
								<li class="fragment fade-in">Easy to log, catch errors and debug</li>
							</ul>
							<li class="fragment fade-in">Defer Binding (no hardcoded values)</li>
						</ul>
					</section>
					<section data-auto-animate data-auto-animate-id="refactoring-goals-bucket-list">
						<h2>Refactoring goals</h2>
						<ul class="bucket-list">
							<li class="fragment fade-in">
								<input type="checkbox" disabled>
								<label>Split the code using GRASP and SOLID</label>
							</li>
							<li class="fragment fade-in">
								<input type="checkbox" disabled>
								<label>Handle errors specifically</label>
							</li>
							<li class="fragment fade-in">
								<input type="checkbox" disabled>
								<label>Defer bindings</label>
							</li>
							<li class="fragment fade-in">
								<input type="checkbox" disabled>
								<label>Reduce coupling</label>
							</li>
						</ul>
					</section>
					<section id="refactoring-goals-complete" style="height: 100%;">
						<div style="height: 100%; display: flex; align-items: center; justify-content: center;">
							<img width="100%" src="./assets/okay-lets-go.gif"/>
						</div>
					</section>
				</section>
				<section id="r-d-r-a">
					<section>
						<h2>Design, Refactoring, Analysis...</h2>
					</section>
				</section>
				<section id="r-d-r-a-1">
					<section>
						<h3>Run #1</h3>
					</section>
					<section>
						<h4>Design</h4>
					</section>
					<section id="r-d-r-a-1-design">
						<img width="100%" src="./assets/process.svg" alt="">
					</section>
					<section id="r-d-r-a-1-design">
						<img width="100%" src="./assets/Solution Context Diagram - Page 2.png" alt="">
					</section>
					<section>
						<h4>Refactoring</h4>
					</section>
					<section id="r-d-r-a-1-refactoring-main" style="height: 100%;">
							<pre style="width: 100%; margin: 0; height: 90%;">
	<code data-line-numbers="|2-5,10-12,18-23|6-8,14-16"  style="width: 100%; height: 100%;">// index.ts
import { 
	type APIGatewayProxyEvent, 
	type APIGatewayProxyResult 
} from 'aws-lambda';
import { fetchData } from './fetch-data';
import { transformToCSV } from "./transform-to-csv";
import { putCSVtoS3 } from "./put-csv-to-s3";

export const handler = async (
	event: APIGatewayProxyEvent
): Promise&lt;APIGatewayProxyResult&gt; => {
	try {
		const data = await fetchData();
		const csv = await transformToCSV(data);
		const response = await putCSVtoS3(csv);
	
		return {
			statusCode: 200,
			body: JSON.stringify({
				message: 'Success!'
			}),
		};
	} catch(error) {
		console.error(JSON.stringify(error, null, 2));
	
		return {
			statusCode: 500,
			body: JSON.stringify(error),
		};
	}
};
								</code></pre>
					</section>
					<section id="r-d-r-a-1-refactoring-module" style="height: 90%;">
							<pre style="width: 100%; margin: 0; height: 100%;">
	<code data-line-numbers  style="width: 100%; height: 100%;">// put-csv-to-s3.ts
import { 
	PutObjectCommand, 
	S3Client, 
	type PutObjectCommandOutput,
} from "@aws-sdk/client-s3";

const client = new S3Client({});

export const putCSVtoS3 = async (
	csv: string
): Promise&lt;PutObjectCommandOutput&gt; => {
	const command = new PutObjectCommand({
		Bucket: "test-bucket",
		Key: `data_${(new Date()).getTime()}.csv`,
		Body: csv,
	});
	
	return client.send(command);
};
								</code></pre>
					</section>
					<section id="r-d-r-a-1-analysis">
						<h4>Analysis</h4>
					</section>
					<section id="r-d-r-a-1-analysis-bucket-list">
						<h4>Refactoring goals</h4>
						<ul class="bucket-list">
							<li>
								<input type="checkbox" disabled checked>
								<label>Split the code using GRASP and SOLID</label>
							</li>
							<li>
								<input type="checkbox" disabled>
								<label>Handle errors specifically</label>
							</li>
							<li>
								<input type="checkbox" disabled>
								<label>Defer bindings</label>
							</li>
							<li>
								<input type="checkbox" disabled>
								<label>Reduce coupling</label>
							</li>
						</ul>
					</section>
				</section>
				<section id="r-d-r-a-2">
					<section>
						<h3>Run #2</h3>
					</section>
					<section>
						<h4>Design</h4>
					</section>
					<section>
						<h4>Refactoring</h4>
					</section>
					<section id="r-d-r-a-2-refactoring-main" style="height: 90%;">
							<pre style="width: 100%; margin: 0; height: 90%;">
	<code data-line-numbers="|24-34"  style="width: 100%; height: 100%;">// index.ts
import { 
	type APIGatewayProxyEvent, 
	type APIGatewayProxyResult 
} from 'aws-lambda';
import { fetchData } from './fetch-data';
import { transformToCSV } from "./transform-to-csv";
import { putCSVtoS3 } from "./put-csv-to-s3";

export const handler = async (
	event: APIGatewayProxyEvent
): Promise&lt;APIGatewayProxyResult&gt; => {
	try {
		const data = await fetchData();
		const csv = await transformToCSV(data);
		const response = await putCSVtoS3(csv);
	
		return {
			statusCode: 200,
			body: JSON.stringify({
				message: 'Success!'
			}),
		};
	} catch(error) {
		console.error(JSON.stringify(error, null, 2));
	
		return {
			statusCode: 500,
			body: JSON.stringify({
				message: 'Failure!',
				...error
			}),
		};
	}
};
								</code></pre>
					</section>
					<section id="r-d-r-a-2-refactoring-module" style="height: 90%;">
						<pre style="width: 100%; margin: 0; height: 100%;">
<code data-line-numbers="|21-24"  style="width: 100%; height: 100%;">// put-csv-to-s3.ts
import { 
PutObjectCommand, 
S3Client, 
type PutObjectCommandOutput,
} from "@aws-sdk/client-s3";

const client = new S3Client({});

export const putCSVtoS3 = async (
	csv: string
): Promise&lt;PutObjectCommandOutput&gt; => {
	try {
		const command = new PutObjectCommand({
			Bucket: "test-bucket",
			Key: `data_${(new Date()).getTime()}.csv`,
			Body: csv,
		});
	
		return await client.send(command);
	} catch (error) {
		console.info("Store CSV file to S3 operation is failed");
		throw error;
	}
};
							</code></pre>
					</section>
					<section id="r-d-r-a-2-analysis">
						<h4>Analysis</h4>
					</section>
					<section id="r-d-r-a-2-analysis-bucket-list">
						<h4>Refactoring goals</h4>
						<ul class="bucket-list">
							<li>
								<input type="checkbox" disabled checked>
								<label>Split the code using GRASP and SOLID</label>
							</li>
							<li>
								<input type="checkbox" disabled checked>
								<label>Handle errors specifically</label>
							</li>
							<li>
								<input type="checkbox" disabled>
								<label>Defer bindings</label>
							</li>
							<li>
								<input type="checkbox" disabled>
								<label>Reduce coupling</label>
							</li>
						</ul>
					</section>
					<section id="r-d-r-a-2-refactoring-module-analysis" style="height: 90%;">
						<pre style="width: 100%; margin: 0; height: 100%;">
<code data-line-numbers="|8-9|16-17|18-19"  style="width: 100%; height: 100%;">// put-csv-to-s3.ts
import { 
	PutObjectCommand, 
	S3Client, 
	type PutObjectCommandOutput,
} from "@aws-sdk/client-s3";

// THERE MIGHT BE HARDCODED REGION
const client = new S3Client({});

export const putCSVtoS3 = async (
	csv: string
): Promise&lt;PutObjectCommandOutput&gt; => {
	try {
		const command = new PutObjectCommand({
			// HARDCODED!
			Bucket: "test-bucket",
			// HARDCODED!
			Key: `data_${(new Date()).getTime()}.csv`,
			Body: csv,
		});
	
		return await client.send(command);
	} catch (error) {
		console.info("Store CSV file to S3 operation is failed");
		throw error;
	}
};
							</code></pre>
					</section>
					<section id="r-d-r-a-3-design-module-envs" style="height: 90%;">
							<pre style="width: 100%; margin: 0; height: 100%;">
	<code data-line-numbers  style="width: 100%; height: 100%;">// put-csv-to-s3.ts
import { PutObjectCommand, S3Client } from "@aws-sdk/client-s3";

// THERE MIGHT BE HARDCODED REGION
const client = new S3Client({});

export const putCSVtoS3 = async (csv: string) => {
	try {
		const command = new PutObjectCommand({
			Bucket: process.env.BUCKET_NAME,
			Key: `${process.env.BUCKET_KEY}_${(new Date()).getTime()}.csv`,
			Body: csv,
		});
		
		return client.send(command);
	} catch (error) {
		// TO CONSIDER: CARRY OUT ERROR MESSAGES (OPTIONAL)
		console.info("Store CSV file to S3 operation is failed");
		throw error;
	}
};
								</code></pre>
					</section>
				</section>
				<section id="r-d-r-a-3">
					<section>
						<h3>Run #3</h3>
					</section>
					<section>
						<h4>Design</h4>
					</section>
					<section id="r-d-r-a-3-design-secrets">
						<img src="./assets/Solution Context Diagram - Secrets.svg"/>
					</section>
					<section id="r-d-r-a-3-design-config">
						<img src="./assets/Solution Context Diagram - Config.svg"/>
					</section>
					<section>
						<h4>Refactoring</h4>
					</section>
					<section id="r-d-r-a-3-refactoring-main" style="height: 90%;">
							<pre style="width: 100%; margin: 0; height: 90%;">
	<code data-line-numbers="|9,15|16-22"  style="width: 100%; height: 100%;">// index.ts
import { 
	type APIGatewayProxyEvent, 
	type APIGatewayProxyResult 
} from 'aws-lambda';
import { fetchData } from './fetch-data';
import { transformToCSV } from "./transform-to-csv";
import { putCSVtoS3 } from "./put-csv-to-s3";
import { getConfig } from './get-config';

export const handler = async (
	event: APIGatewayProxyEvent
): Promise&lt;APIGatewayProxyResult&gt; => {
	try {
		const config = await getConfig();
		const data = await fetchData(config.apiURL, config.apiToken);
		const csv = await transformToCSV(data, config.separator);
		const response = await putCSVtoS3(
			csv, 
			config.bucketName, 
			config.bucketKey
		);
	
		return {
			statusCode: 200,
			body: JSON.stringify({
				message: 'Success!'
			}),
		};
	} catch(error) {
		console.error(JSON.stringify(error, null, 2));
	
		return {
			statusCode: 500,
			body: JSON.stringify({
				message: 'Failure!',
				...error
			}),
		};
	}
};
								</code></pre>
					</section>
					<section id="r-d-r-a-3-refactoring-module" style="height: 90%;">
							<pre style="width: 100%; margin: 0; height: 100%;">
	<code data-line-numbers="|9-10,13-17"  style="width: 100%; height: 100%;">// put-csv-to-s3.ts
import { PutObjectCommand, S3Client } from "@aws-sdk/client-s3";
import { type Config } from './get-config';

const client = new S3Client({});

export const putCSVtoS3 = async (
	csv: string, 
	bucketName: string, 
	bucketKey: string
) => {
	try {
		const command = new PutObjectCommand({
			Bucket: bucketName,
			Key: bucketKey,
			Body: csv,
		});
		
		return await client.send(command);
	} catch (error) {
		console.info("Store CSV file to S3 operation is failed");
		throw error;
	}
};
								</code></pre>
					</section>
					<section id="r-d-r-a-3-analysis">
						<h4>Analysis</h4>
					</section>
					<section id="r-d-r-a-3-analysis-bucket-list">
						<h4>Refactoring goals</h4>
						<ul class="bucket-list">
							<ul class="bucket-list">
								<li>
									<input type="checkbox" disabled checked>
									<label>Split the code using GRASP and SOLID</label>
								</li>
								<li>
									<input type="checkbox" disabled checked>
									<label>Handle errors specifically</label>
								</li>
								<li>
									<input type="checkbox" disabled checked>
									<label>Defer bindings</label>
								</li>
								<li>
									<input type="checkbox" disabled>
									<label>Reduce coupling</label>
								</li>
							</ul>
						</ul>
					</section>
					<section id="r-d-r-a-3-main-overview" style="height: 90%;">
						<pre style="width: 100%; margin: 0; height: 90%;">
<code data-line-numbers="|7-8,17-18"  style="width: 100%; height: 100%;">// index.ts
import { 
	type APIGatewayProxyEvent, 
	type APIGatewayProxyResult 
} from 'aws-lambda';
import { fetchData } from './fetch-data';
import { transformToCSV } from "./transform-to-csv";
import { putCSVtoS3 } from "./put-csv-to-s3";
import { getConfig } from './get-config';

export const handler = async (
	event: APIGatewayProxyEvent
): Promise&lt;APIGatewayProxyResult&gt; => {
	try {
		const config = await getConfig();
		const data = await fetchData(config.apiURL, config.apiToken);
		const csv = await transformToCSV(data, config.separator);
		const response = await putCSVtoS3(
			csv, 
			config.bucketName, 
			config.bucketKey
		);

		return {
			statusCode: 200,
			body: JSON.stringify({
				message: 'Success!'
			}),
		};
	} catch(error) {
		console.error(JSON.stringify(error, null, 2));

		return {
			statusCode: 500,
			body: JSON.stringify({
				message: 'Failure!',
				...error
			}),
		};
	}
};
							</code></pre>
					</section>
				</section>
				<section id="r-d-r-a-4">
					<section>
						<h3>Run #4</h3>
					</section>
					<section>
						<h4>Design</h4>
					</section>
					<section id="r-d-r-a-4-design-config">
						<img src="./assets/new context.svg"/>
					</section>
					<section>
						<h4>Refactoring</h4>
					</section>
					<section id="r-d-r-a-4-refactoring-main-overview" style="height: 90%;">
						<pre style="width: 100%; margin: 0; height: 90%;">
<code data-line-numbers  style="width: 100%; height: 100%;">// index.ts
import { 
	type APIGatewayProxyEvent, 
	type APIGatewayProxyResult 
} from 'aws-lambda';
import * as API from "@api";
import { convert } from "@converter";
import { putToStorage } from "@storage";
import { getConfig } from '@config';

export const handler = async (
	event: APIGatewayProxyEvent
): Promise&lt;APIGatewayProxyResult&gt; => {
	try {
		const config = await getConfig();
		const data = await API.get(config);
		const transformedData = await convert(data, config);
		const response = await putToStorage(transformedData, config);

		return {
			statusCode: 200,
			body: JSON.stringify({
				message: 'Success!'
			}),
		};
	} catch(error) {
		console.error(JSON.stringify(error, null, 2));

		return {
			statusCode: 500,
			body: JSON.stringify({
				message: 'Failure!',
				...error
			}),
		};
	}
};
							</code></pre>
					</section>
					<section id="r-d-r-a-4-refactoring-main-overview-module-highlight" style="height: 90%;">
						<img src="./assets/qrcode_ts_path.png" alt="" style="position: fixed; top: 140px; right: 250px; z-index: 100; height: 120px;">
						<pre style="width: 100%; margin: 0; height: 90%;">
<code data-line-numbers="6-9"  style="width: 100%; height: 100%;">// index.ts
import { 
	type APIGatewayProxyEvent, 
	type APIGatewayProxyResult 
} from 'aws-lambda';
import * as API from "@api";
import { convert } from "@converter";
import { putToStorage } from "@storage";
import { getConfig } from '@config';

export const handler = async (
	event: APIGatewayProxyEvent
): Promise&lt;APIGatewayProxyResult&gt; => {
	try {
		const config = await getConfig();
		const data = await API.get(config);
		const transformedData = await convert(data, config);
		const response = await putToStorage(transformedData, config);

		return {
			statusCode: 200,
			body: JSON.stringify({
				message: 'Success!'
			}),
		};
	} catch(error) {
		console.error(JSON.stringify(error, null, 2));

		return {
			statusCode: 500,
			body: JSON.stringify({
				message: 'Failure!',
				...error
			}),
		};
	}
};
							</code></pre>
					</section>
					<section id="r-d-r-a-4-refactoring-main-overview-usage-highlight" style="height: 90%;">
						<pre style="width: 100%; margin: 0; height: 90%;">
<code data-line-numbers="15-18"  style="width: 100%; height: 100%;">// index.ts
import { 
	type APIGatewayProxyEvent, 
	type APIGatewayProxyResult 
} from 'aws-lambda';
import * as API from "@api";
import { convert } from "@converter";
import { putToStorage } from "@storage";
import { getConfig } from '@config';

export const handler = async (
	event: APIGatewayProxyEvent
): Promise&lt;APIGatewayProxyResult&gt; => {
	try {
		const config = await getConfig();
		const data = await API.get(config);
		const transformedData = await convert(data, config);
		const response = await putToStorage(transformedData, config);

		return {
			statusCode: 200,
			body: JSON.stringify({
				message: 'Success!'
			}),
		};
	} catch(error) {
		console.error(JSON.stringify(error, null, 2));

		return {
			statusCode: 500,
			body: JSON.stringify({
				message: 'Failure!',
				...error
			}),
		};
	}
};
							</code></pre>
					</section>
					<section id="r-d-r-a-4-refactoring-storage" style="height: 90%;">
				<pre style="width: 100%; margin: 0; height: 100%;">
<code data-line-numbers="|2-3|8-12|13" style="width: 100%; height: 100%;">// @storage/index.ts
import { putObjectToS3 } from './s3-realization';
//import { somethingElse } from './something-else';
import { type Config } from '@config';

export const putToStorage = async (data: string, config: Config) => {
	try {
		return await putObjectToS3(
			data, 
			config.bucketName,
			config.bucketKey,
		);
		// in the case of dynamic changes, use if-else/switch
	} catch(error) {
		console.info("Error inside 'putToStorage' function");
		throw error;
	}
};
					</code></pre>
					</section>
					<section>
						<h4>Analysis</h4>
					</section>
					<section id="r-d-r-a-4-analysis-bucket-list">
						<h4>Refactoring goals</h4>
						<ul class="bucket-list">
							<li>
								<input type="checkbox" disabled checked>
								<label>Split the code using GRASP and SOLID</label>
							</li>
							<li>
								<input type="checkbox" disabled checked>
								<label>Handle errors specifically</label>
							</li>
							<li>
								<input type="checkbox" disabled checked>
								<label>Defer bindings</label>
							</li>
							<li>
								<input type="checkbox" disabled checked>
								<label>Reduce coupling</label>
							</li>
						</ul>
					</section>
					<section id="r-d-r-a-4-analysis-tactics">
						<img src="./assets/tactics.png" style="transform: scale(1.3);"/>
					</section>
				</section>
				<section>
					<div style="height: 100%; display: flex; align-items: center; justify-content: center;">
						<img width="100%" src="./assets/thumbs-up-90s.gif"/>
					</div>
				</section>
				<section id="r-d-r-a-5">
					<section>
						<h3>Run #5</h3>
					</section>
					<section>
						<h4>Design</h4>
					</section>
					<section id="r-d-r-a-5-ioc">
						<img src="./assets/IoC.svg" alt="" style="transform: scale(1.3);">
					</section>
					<section id="r-d-r-a-1-5-terms-ioc">
						<h5>Inversion of Control</h5>
						<blockquote>Inversion of Control (IoC) is a <span class="red">design principle</span> in which a software component
							 is designed to receive its <span class="red">dependencies from an external source</span>, rather than creating them itself. </blockquote>
					</section>
					<section id="r-d-r-a-5-terms-di">
						<h5>DI</h5>
						<blockquote>Dependency injection is a programming technique that makes a class <span class="red">independent of its dependencies</span>. 
							It achieves that by <span class="red">decoupling the usage of an object from its creation</span>. 
							This helps you to follow SOLID's <span class="red">dependency inversion</span> and <span class="red">single responsibility</span> principles.</blockquote>
					</section>
					<section>
						<h4>Refactoring</h4>
					</section>
					<section id="r-d-r-a-5-main" style="height: 100%;">
						<pre style="width: 100%; margin: 0; height: 90%;">
<code data-line-numbers  style="width: 100%; height: 100%;">// index.ts
import { 
	type APIGatewayProxyEvent, 
	type APIGatewayProxyResult 
} from 'aws-lambda';
import { createContainer } from './inversify.container';
import { TOKENS, type IConductorProcessor } from '@infrastructure';

export const handler = async (
	event: APIGatewayProxyEvent,
): Promise&lt;APIGatewayProxyResult&gt; => {
	try {
		// there might be params
		const container = await createContainer();
		const conductorProcessor = 
			container.get&lt;IConductorProcessor&gt;(TOKENS.CONDUCTOR_PROCESSOR);
		await conductorProcessor.processData();
		
		return {
			statusCode: 200,
			body: JSON.stringify({
				message: 'Success!'
			}),
		};
	} catch (error) {
		console.error(JSON.stringify(error, null, 2));

		return {
			statusCode: 500,
			body: JSON.stringify({
				message: 'Failure!',
				...error
			}),
		};
	}
};
							</code></pre>
					</section>
					<section id="r-d-r-a-5-main-highlight" style="height: 100%;">
						<img src="./assets/qrcode_inversify.png" alt="" height="120px;" style="position: fixed; top: 190px; right: 100px; z-index: 100;">
						<pre style="width: 100%; margin: 0; height: 90%;">
<code data-line-numbers="6,14"  style="width: 100%; height: 100%;">// index.ts
import { 
	type APIGatewayProxyEvent, 
	type APIGatewayProxyResult 
} from 'aws-lambda';
import { createContainer } from './inversify.container';
import { TOKENS, type IConductorProcessor } from '@infrastructure';

export const handler = async (
	event: APIGatewayProxyEvent,
): Promise&lt;APIGatewayProxyResult&gt; => {
	try {
		// there might be params
		const container = await createContainer();
		const conductorProcessor = 
			container.get&lt;IConductorProcessor&gt;(TOKENS.CONDUCTOR_PROCESSOR);
		await conductorProcessor.processData();
		
		return {
			statusCode: 200,
			body: JSON.stringify({
				message: 'Success!'
			}),
		};
	} catch (error) {
		console.error(JSON.stringify(error, null, 2));

		return {
			statusCode: 500,
			body: JSON.stringify({
				message: 'Failure!',
				...error
			}),
		};
	}
};
							</code></pre>
					</section>
					<section id="r-d-r-a-5-container" style="height: 100%;">
						<pre style="width: 100%; margin: 0; height: 90%;">
<code data-line-numbers="|5-13|14-20" style="width: 100%; height: 100%;">// inversify.config.ts
import "reflect-metadata";
import { Container } from "inversify";
	
import {
  TOKENS,
  getConfig,
  type IConductorProcessor,
  type IConfigProvider,
  type IAPIProvider,
  type IConverterProvider,
  type IStorageProvider,
} from "@infrastructure";
import { ConductorProcessor } from "@processors";
import { 
	ConfigProvider,
	APIProvider, 
	ConverterProvider, 
	StorageProvider 
} from "@providers";

export const createContainer = (): Container => {
	const container = new Container({ defaultScope: "Singleton" });
	
	// processors
	container
		.bind&lt;IConductorProcessor&gt;(TOKENS.CONDUCTOR)
		.to(ConductorProcessor);
	
	const config = await getConfig();
	// providers
	container
		.bind&lt;IConfigProvider&gt;(TOKENS.CONFIG)
		.tValue(config);
	container
		.bind&lt;IAPIProvider&gt;(TOKENS.API)
		.to(APIProvider);
	container
		.bind&lt;IConverterProvider&gt;(TOKENS.CONVERTER)
		.to(ConverterProvider);
	container
		.bind&lt;IStorageProvider&gt;(TOKENS.STORAGE)
		.to(StorageProvider);

  return container;
};	
							</code></pre>
					</section>
					<section id="r-d-r-a-5-container-creation" style="height: 100%;">
						<img src="./assets/qrcode_refactoring_guru.png" height="100px" style="position: absolute; z-index: 1000; top: 150px; right: 130px;" alt="">
						<pre style="width: 100%; margin: 0; height: 90%;">
<code data-line-numbers="23" style="width: 100%; height: 100%;">// inversify.config.ts
import "reflect-metadata";
import { Container } from "inversify";
	
import {
  TOKENS,
  getConfig,
  type IConductorProcessor,
  type IConfigProvider,
  type IAPIProvider,
  type IConverterProvider,
  type IStorageProvider,
} from "@infrastructure";
import { ConductorProcessor } from "@processors";
import { 
	ConfigProvider,
	APIProvider, 
	ConverterProvider, 
	StorageProvider 
} from "@providers";

export const createContainer = (): Container => {
	const container = new Container({ defaultScope: "Singleton" });
	
	// processors
	container
		.bind&lt;IConductorProcessor&gt;(TOKENS.CONDUCTOR)
		.to(ConductorProcessor);
	
	const config = await getConfig();
	// providers
	container
		.bind&lt;IConfigProvider&gt;(TOKENS.CONFIG)
		.toValue(config);
	container
		.bind&lt;IAPIProvider&gt;(TOKENS.API)
		.to(APIProvider);
	container
		.bind&lt;IConverterProvider&gt;(TOKENS.CONVERTER)
		.to(ConverterProvider);
	container
		.bind&lt;IStorageProvider&gt;(TOKENS.STORAGE)
		.to(StorageProvider);

  return container;
};	
							</code></pre>
					</section>
					<section id="r-d-r-a-5-container-binding" style="height: 100%;">
						<pre style="width: 100%; margin: 0; height: 90%;">
<code data-line-numbers="26-28|32-43" style="width: 100%; height: 100%;">// inversify.config.ts
import "reflect-metadata";
import { Container } from "inversify";
	
import {
  TOKENS,
  getConfig,
  type IConductorProcessor,
  type IConfigProvider,
  type IAPIProvider,
  type IConverterProvider,
  type IStorageProvider,
} from "@infrastructure";
import { ConductorProcessor } from "@processors";
import { 
	ConfigProvider,
	APIProvider, 
	ConverterProvider, 
	StorageProvider 
} from "@providers";

export const createContainer = (): Container => {
	const container = new Container({ defaultScope: "Singleton" });
	
	// processors
	container
		.bind&lt;IConductorProcessor&gt;(TOKENS.CONDUCTOR)
		.to(ConductorProcessor);
	
	const config = await getConfig();
	// providers
	container
		.bind&lt;IConfigProvider&gt;(TOKENS.CONFIG)
		.toValue(config);
	container
		.bind&lt;IAPIProvider&gt;(TOKENS.API)
		.to(APIProvider);
	container
		.bind&lt;IConverterProvider&gt;(TOKENS.CONVERTER)
		.to(ConverterProvider);
	container
		.bind&lt;IStorageProvider&gt;(TOKENS.STORAGE)
		.to(StorageProvider);

  return container;
};	
							</code></pre>
					</section>
					<section id="r-d-r-a-5-processor" style="height: 100%;">
						<pre style="width: 100%; margin: 0; height: 90%;">
<code data-line-numbers="5|7-12|15-23" style="width: 100%; height: 100%;">// @processors&sol;conductorProcessor.ts
import { inject, injectable } from "inversify";

@injectable()
export class ConductorProcessor implements IConductorProcessor {
	constructor(
		@inject(TOKENS.API)
		private readonly _apiProvider: IAPIProvider,
		@inject(TOKENS.CONVERTER)
		private readonly _converterProvider: IConverterProvider,
		@inject(TOKENS.STORAGE)
		private readonly _storageProvider: IStorageProvider,
	) {}

	public async processData(): Promise&lt;void&gt; {
		try {
			const data = await this._apiProvider.getData();
			const csv = await this._converterProvider.convertData(data);
			await this._storageProvider(csv);
		} catch(error) {
			console.info("[ConductorProcessor][processData] error");
			throw error;
		}
	}
}
							</code></pre>
					</section>
					<section id="r-d-r-a-5-main-highlight-processor" style="height: 100%;">
						<pre style="width: 100%; margin: 0; height: 90%;">
<code data-line-numbers="15-17"  style="width: 100%; height: 100%;">// index.ts
import { 
	type APIGatewayProxyEvent, 
	type APIGatewayProxyResult 
} from 'aws-lambda';
import { createContainer } from './inversify.container';
import { TOKENS, type IConductorProcessor } from '@infrastructure';

export const handler = async (
	event: APIGatewayProxyEvent,
): Promise&lt;APIGatewayProxyResult&gt; => {
	try {
		// there might be params
		const container = await createContainer();
		const conductorProcessor = 
			container.get&lt;IConductorProcessor&gt;(TOKENS.CONDUCTOR_PROCESSOR);
		await conductorProcessor.processData();
		
		return {
			statusCode: 200,
			body: JSON.stringify({
				message: 'Success!'
			}),
		};
	} catch (error) {
		console.error(JSON.stringify(error, null, 2));

		return {
			statusCode: 500,
			body: JSON.stringify({
				message: 'Failure!',
				...error
			}),
		};
	}
};
							</code></pre>
					</section>
					<section>
						<h4>Analysis</h4>
					</section>
					<section id="r-d-r-a-5-analysis">
						<h4>Refactoring goals</h4>
						<ul class="bucket-list">
							<li>
								<input type="checkbox" disabled checked>
								<label>Split the code using GRASP and SOLID</label>
							</li>
							<li>
								<input type="checkbox" disabled checked>
								<label>Handle errors specifically</label>
							</li>
							<li>
								<input type="checkbox" disabled checked>
								<label>Defer bindings</label>
							</li>
							<li>
								<input type="checkbox" disabled checked>
								<label>Reduce coupling</label>
							</li>
						</ul>
					</section>
					<section id="r-d-r-a-5-analysis-container" style="height: 100%;">
						<pre style="width: 100%; margin: 0; height: 90%;">
<code data-line-numbers="22-43" style="width: 100%; height: 100%;">// inversify.config.ts
import "reflect-metadata";
import { Container } from "inversify";
	
import {
  TOKENS,
  getConfig,
  type IConductorProcessor,
  type IConfigProvider,
  type IAPIProvider,
  type IConverterProvider,
  type IStorageProvider,
} from "@infrastructure";
import { ConductorProcessor } from "@processors";
import { 
	ConfigProvider,
	APIProvider, 
	ConverterProvider, 
	StorageProvider 
} from "@providers";

export const createContainer = (): Container => {
	const container = new Container({ defaultScope: "Singleton" });
	
	// processors
	container
		.bind&lt;IConductorProcessor&gt;(TOKENS.CONDUCTOR)
		.to(ConductorProcessor);
	
	const config = await getConfig();
	// providers
	container
		.bind&lt;IConfigProvider&gt;(TOKENS.CONFIG)
		.toValue(config);
	container
		.bind&lt;IAPIProvider&gt;(TOKENS.API)
		.to(APIProvider);
	container
		.bind&lt;IConverterProvider&gt;(TOKENS.CONVERTER)
		.to(ConverterProvider);
	container
		.bind&lt;IStorageProvider&gt;(TOKENS.STORAGE)
		.to(StorageProvider);

  return container;
};	
							</code></pre>
					</section>
				</section>
				<section id="mortal-kombat">
					<section>
						<img src="./assets/8rqnmt.jpg" alt="">
					</section>
					<section>
						<div style="height: 100%;">
							<h4>Run #4</h4>
							<img src="./assets/run4.png" alt="">
						</div>
					</section>
					<section>
						<div style="height: 100%;">
							<h4>Run #5</h4>
							<img src="./assets/run5.png" alt="">
						</div>
					</section>
					<section>
						<div style="height: 100%; display: flex; align-items: center; justify-content: center;">
							<img width="100%" src="./assets/images.jpg"/>
							<img style="position: fixed; top: 150px; right: 0px;z-index: 1000;" width=400px" src="./assets/run5.png" alt="">
							<img style="position: fixed; top: 150px; left: 0px;z-index: 1000;" width="400px" src="./assets/run4.png" alt="">
						</div>
					</section>
					<section>
						<img src="./assets/tom.jpg" alt="">
						<img class="fragment fade-in" src="./assets/fuck.png" style="position: fixed; bottom: 50px; left: -100px; z-index: 1000;" alt="">
					</section>
				</section>
				<section>
					<section data-auto-animate data-auto-animate-id="conclusions">
						<h2>Conclusions</h2>
					</section>
					<section data-auto-animate data-auto-animate-id="conclusions">
						<h2>Conclusions</h2>
						<ul>
							<li class="fragment fade-in">Excessive abstraction is not about maintainability</li>
							<li class="fragment fade-in">Wrong assumptions</li>
							<li class="fragment fade-in">Complexity of the solution for non-required capabilities and QAs</li>
							<li class="fragment fade-in">Absence of efforts planning</li>
						</ul>
					</section>
				</section>
				<section>
					<h2 class="red" style="color: #ff2c2d;">Communication is a Key</h2>
				</section>
				<section id="what's-next">
					<section data-auto-animate data-auto-animate-id="next">
						<h2>P.S.</h2>
					</section>
					<section data-auto-animate data-auto-animate-id="next">
						<h2>P.S.</h2>
						<ul>
							<li class="fragment fade-in">Communities</li>
							<li class="fragment fade-in">Research and Development</li>
							<li class="fragment fade-in">Open Source Solutions</li>
						</ul>
						<p class="fragment fade-in">
							<a href="https://holyjs.ru/en/talks/861c4a4cb7874a9d9c489f02b1ee2638/?referer=%2Fpersons%2Fac5da85a8d364088bb29bc03a1fd93c9%2F%3Fversion%3D2024%2BSpring" target="_blank">
								Talk from Aleksandr Kanunnikov on HolyJS 
							</a>
						</p>
						<p class="fragment fade-in">
							<a href="https://github.com/lifeart/glimmer-next" target="_blank">
								GXT
							</a>
						</p>
					</section>
				</section>
				<section id="contacts">
					<h2>Рәхмәт!</h2>
					<div style="display: flex; align-items: center; justify-content: center;">
						<div style="display: flex; flex-direction: column; gap: 12px; justify-content: center; flex: 1;">
							<p>Part I</p>
							<img src="./assets/github_qr_code.png"/>
						</div>
						<div style="display: flex; flex-direction: column; gap: 12px; justify-content: center; flex: 1;">
							<p>Part II</p>
							<img src="./assets/qrcode_azatdavliatshin.png"/>
						</div>
						<div style="display: flex; flex-direction: column; gap: 12px; justify-content: center; flex: 1;">
							<p>Telegram</p>
							<img src="./assets/telegram_qr_code.png"/>
						</div>
						<div style="display: flex; flex-direction: column; gap: 12px; justify-content: center; flex: 1;">
							<p>LinkedIn</p>
							<img src="./assets/linkedin_qr_code.png"/>
						</div>
					</div>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				transition: 'none',
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ],
				slideNumber: 'c/t',
			}).then(() => {
				const slideNumbersDOM = document.querySelector('.slide-number');
				slideNumbersDOM.style.fontSize = '20px';
				slideNumbersDOM.style.left = '24px';
				slideNumbersDOM.style.right = 'auto';
			})
		</script>
	</body>
</html>
